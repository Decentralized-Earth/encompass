#!/bin/bash
PREFIX="/"


echo ""
echo "Encompass-ELECTRUM_VERSION for Ubuntu-14.04"
echo "by mazaclub - Lead Author, Tyler Willis, release manager, Rob Nelson"
echo ""
echo "based on Electrum, By Thomas Voegtlin"
echo "Requires root privileges, installs Encompass and needed modules"
echo ""
echo "Extracting file into /tmp/Encompass-ELECTRUM_VERSION"
SKIP=`awk '/^__TARFILE_FOLLOWS__/ { print NR + 1; exit 0; }' $0`

#remember our file name
THIS=`pwd`/$0

# take the tarfile and pipe it into tar
tail -n +$SKIP $THIS | tar -C /tmp -xpvz

# Any script here will happen after the tar file extract.
function success (){
 echo "Encompass-ELECTRUM_VERSION is installed to $(which encompass)"
 echo "Remember to save your seeds in a safe place!!" 
 echo "Finished"
 exit 0
}
echo "Installing Encompass-ELECTRUM_VERSION"
cd /tmp/Encompass-ELECTRUM_VERSION
dpkg -i python-ltc-scrypt_1.0-1_amd64.deb \
 && dpkg -i python-darkcoin-hash_1.1-1_amd64.deb \
 && dpkg -i python-socksipy-branch_1.01-1_all.deb \
 && apt-get install -y -f \
 && dpkg -i python-encompass_ELECTRUM_VERSION-1_all.deb 
 apt-get install -y -f \
 && dpkg -i python-encompass_ELECTRUM_VERSION-1_all.deb \
 && pip install --upgrade -r requirements.txt \
 && success

echo "Install appears to have failed - please ensure you have root permissions and try again"
exit 1

# NOTE: Don't place any newline characters after the last line below.
__TARFILE_FOLLOWS__
